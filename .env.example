# ============================================
# AIRI Stage Web - Environment Configuration
# ============================================
# This file contains all environment variables needed for deploying
# AIRI Stage Web on Vercel or running it locally.
# Copy this file to .env and fill in your actual values.

# ============================================
# Provider Health Checks
# ============================================
# Skip provider health checks to avoid CORS errors in serverless deployments.
# Recommended: true for browser/Vercel environments
VITE_SKIP_PROVIDER_HEALTH_CHECK=true

# ============================================
# Default Providers (REQUIRED)
# ============================================
# These must match configured provider identifiers
DEFAULT_CHAT_PROVIDER=openai
DEFAULT_SPEECH_PROVIDER=openai-audio-speech
DEFAULT_TRANSCRIPTION_PROVIDER=openai-audio-transcription

# ============================================
# OpenAI Configuration
# ============================================
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.openai.com/v1/
OPENAI_MODEL=gpt-4o-mini

# ============================================
# OpenRouter Configuration
# ============================================
OPENROUTER_API_KEY=sk-or-...

# ============================================
# Anthropic Claude Configuration
# ============================================
ANTHROPIC_API_KEY=sk-ant-...

# ============================================
# Google Gemini Configuration
# ============================================
GOOGLE_GENERATIVE_AI_API_KEY=AIza...

# ============================================
# AIRI Backend WebSocket
# ============================================
# WebSocket endpoint for live configurator feature
# Point to your AIRI backend for remote module configuration
# Set VITE_DISABLE_WEBSOCKET=true to disable WebSocket in serverless deployments
VITE_AIRI_WS_URL=wss://airi.yourdomain.com/ws
VITE_DISABLE_WEBSOCKET=true

# ============================================
# Short-Term Memory Configuration (Vercel Serverless)
# ============================================
# Short-term memory stores conversation history via /api/memory/* serverless functions
# Supports Vercel KV (recommended) or Upstash Redis

# Option 1: Vercel KV (automatically provided when you create a KV database in Vercel Storage tab)
KV_URL=https://*.kv.vercel-storage.com
KV_REST_API_URL=https://*.kv.vercel-storage.com
KV_REST_API_TOKEN=AX****
KV_REST_API_READ_ONLY_TOKEN=AW****

# Option 2: Upstash Redis (automatically provided when you create Upstash integration in Vercel)
UPSTASH_KV_REST_API_URL=https://us1-bold-foo.upstash.io
UPSTASH_KV_URL=https://us1-bold-foo.upstash.io
UPSTASH_KV_REST_API_TOKEN=AX****
UPSTASH_REDIS_URL=redis://default:****@us1-bold-foo.upstash.io:6379

# Short-term memory settings
SHORT_TERM_MEMORY_PROVIDER=vercel-kv
MEMORY_NAMESPACE=memory
SHORT_TERM_MEMORY_MAX_MESSAGES=20
SHORT_TERM_MEMORY_TTL_SECONDS=1800

# ============================================
# Long-Term Memory Configuration (Optional)
# ============================================
# Long-term memory enables semantic search via vector databases
# Supports Postgres+pgvector or Qdrant
# Set to 'none' to disable long-term memory
LONG_TERM_MEMORY_PROVIDER=postgres-pgvector
MEMORY_LONG_TERM_PROVIDER=postgres-pgvector

# ============================================
# PostgreSQL + pgvector Configuration
# ============================================
# Required when LONG_TERM_MEMORY_PROVIDER=postgres-pgvector
# Option 1: Use connection string (Vercel Postgres or external database)
POSTGRES_URL=postgresql://user:pass@host/db
DATABASE_URL=postgresql://user:pass@host/db

# Option 2: Use individual connection parameters (for external databases)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-password
POSTGRES_SSL=false

# Memory table name for storing embeddings
MEMORY_TABLE_NAME=memory_embeddings

# ============================================
# Qdrant Configuration
# ============================================
# Required when LONG_TERM_MEMORY_PROVIDER=qdrant
QDRANT_URL=https://xyz.cloud.qdrant.io
QDRANT_API_KEY=your-api-key
QDRANT_COLLECTION_NAME=memory

# ============================================
# Embedding Provider Configuration (Required for Long-Term Memory)
# ============================================
# Provider: openai, cloudflare, or openai-compatible
MEMORY_EMBEDDING_PROVIDER=openai
MEMORY_EMBEDDING_MODEL=text-embedding-3-small
MEMORY_EMBEDDING_DIMENSIONS=1536

# OpenAI Embedding Configuration (default when provider is openai/openai-compatible)
MEMORY_EMBEDDING_API_KEY=sk-...
MEMORY_EMBEDDING_BASE_URL=https://api.openai.com/v1/
OPENAI_API_KEY=sk-...  # Fallback if MEMORY_EMBEDDING_API_KEY is not set
OPENAI_BASE_URL=https://api.openai.com/v1/  # Fallback if MEMORY_EMBEDDING_BASE_URL is not set

# Cloudflare Workers AI Configuration (when provider is cloudflare)
MEMORY_EMBEDDING_ACCOUNT_ID=1234567890abcdef
MEMORY_EMBEDDING_API_TOKEN=your-cf-token
CLOUDFLARE_ACCOUNT_ID=1234567890abcdef  # Fallback if MEMORY_EMBEDDING_ACCOUNT_ID is not set
CLOUDFLARE_API_TOKEN=your-cf-token  # Fallback if MEMORY_EMBEDDING_API_TOKEN is not set
MEMORY_EMBEDDING_MODEL=@cf/baai/bge-base-en-v1.5
CLOUDFLARE_EMBEDDING_MODEL=@cf/baai/bge-base-en-v1.5  # Fallback fallback
