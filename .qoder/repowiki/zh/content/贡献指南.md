# 贡献指南

<cite>
**本文档中引用的文件**  
- [eslint.config.js](file://eslint.config.js)
- [uno.config.ts](file://uno.config.ts)
- [vitest.config.ts](file://vitest.config.ts)
- [turbo.json](file://turbo.json)
- [README.md](file://README.md)
- [apps/stage-tamagotchi/src/main/app/debugger.ts](file://apps/stage-tamagotchi/src/main/app/debugger.ts)
- [packages/stage-ui/vitest.config.ts](file://packages/stage-ui/vitest.config.ts)
- [packages/injecta/vitest.config.ts](file://packages/injecta/vitest.config.ts)
- [services/minecraft/vitest.config.ts](file://services/minecraft/vitest.config.ts)
- [services/telegram-bot/vitest.config.ts](file://services/telegram-bot/vitest.config.ts)
- [apps/stage-tamagotchi/tsconfig.node.json](file://apps/stage-tamagotchi/tsconfig.node.json)
- [bump.config.ts](file://bump.config.ts)
</cite>

## 目录
1. [简介](#简介)
2. [代码规范](#代码规范)
3. [提交信息格式](#提交信息格式)
4. [分支管理策略](#分支管理策略)
5. [Pull Request流程](#pull-request流程)
6. [测试策略与运行方法](#测试策略与运行方法)
7. [调试技巧](#调试技巧)
8. [参与贡献的方式](#参与贡献的方式)
9. [结论](#结论)

## 简介
欢迎加入Project AIRI的开发社区！本项目旨在构建一个可交互的AI虚拟角色容器，支持多种平台和功能扩展。我们鼓励所有开发者、设计师和爱好者参与进来，共同打造下一代数字生命体验。本文档详细说明了如何遵循项目规范进行代码贡献，并提供了必要的开发与调试指导。

[无来源，此节为概念性介绍]

## 代码规范
项目采用ESLint进行JavaScript/TypeScript代码检查，并使用UnoCSS作为原子化CSS框架来管理样式。ESLint配置基于`@moeru/eslint-config`，启用了TypeScript、Vue以及UnoCSS相关规则。通过`.eslintrc.js`文件中的配置，确保代码风格统一并避免常见错误。UnoCSS配置则定义了字体、图标集、动画及响应式断点等全局样式策略，所有样式均通过工具类在模板中直接应用。

**Section sources**
- [eslint.config.js](file://eslint.config.js#L1-L70)
- [uno.config.ts](file://uno.config.ts#L1-L263)

## 提交信息格式
我们遵循约定式提交（Conventional Commits）规范，以保证提交历史清晰可读。提交信息应包含类型、可选的作用范围和描述，例如：`feat(ui): 添加新按钮组件` 或 `fix(auth): 修复登录验证漏洞`。类型包括`feat`（新功能）、`fix`（修复bug）、`docs`（文档更新）、`style`（代码格式调整）、`refactor`（重构）、`test`（测试相关）和`chore`（构建或辅助工具变动）。这有助于自动生成变更日志并管理版本发布。

[无具体文件分析，此节为通用说明]

## 分支管理策略
项目采用基于主干的开发模式，所有功能开发应在独立分支上进行。新功能或重大修改应从`main`分支创建特性分支（如`feature/new-ui-layout`），修复紧急问题可创建修复分支（如`hotfix/login-bug`）。完成开发后，通过Pull Request合并至`main`分支。长期维护的发布版本可通过标签（tag）标识，如`v1.2.0`。推荐使用`turbo.json`中定义的任务来协调多包项目的构建与测试流程。

**Section sources**
- [turbo.json](file://turbo.json#L1-L8)
- [README.md](file://README.md#L250-L260)

## Pull Request流程
提交Pull Request前，请确保代码已通过所有测试且符合ESLint规范。PR标题应简洁明了地描述变更内容，正文中需说明修改目的、影响范围及测试情况。建议附上截图或视频演示UI变更。每位贡献者至少需要一位核心成员审查批准后方可合并。对于涉及安全、性能或架构调整的重大变更，可能需要多轮评审与讨论。自动化CI流水线将验证代码质量与兼容性。

[无具体文件分析，此节为流程说明]

## 测试策略与运行方法
项目使用Vitest作为主要测试框架，配置文件位于各子模块根目录下。测试用例覆盖单元测试与集成测试，重点关注核心逻辑、API接口及用户交互行为。可通过运行`pnpm test`命令执行所有测试套件，或指定特定模块进行局部测试。例如，在`packages/stage-ui`目录下运行`vitest`将仅执行该组件库的测试。测试配置中启用了Node环境与浏览器环境的双重支持，确保跨平台一致性。

**Section sources**
- [vitest.config.ts](file://vitest.config.ts#L1-L8)
- [packages/stage-ui/vitest.config.ts](file://packages/stage-ui/vitest.config.ts#L1-L6)
- [packages/injecta/vitest.config.ts](file://packages/injecta/vitest.config.ts#L1-L6)
- [services/minecraft/vitest.config.ts](file://services/minecraft/vitest.config.ts#L1-L6)
- [services/telegram-bot/vitest.config.ts](file://services/telegram-bot/vitest.config.ts#L1-L25)

## 调试技巧
### 调试Electron应用
对于桌面版Stage Tamagotchi应用，可通过设置环境变量`APP_REMOTE_DEBUG=true`启用远程调试功能。启动应用后，Electron会开放指定端口（默认9222）供Chrome DevTools连接。`debugger.ts`文件中的`setupDebugger`函数负责配置调试开关，`openDebugger`函数则自动打开调试器界面。此机制允许开发者实时检查渲染进程与主进程的状态。

**Section sources**
- [apps/stage-tamagotchi/src/main/app/debugger.ts](file://apps/stage-tamagotchi/src/main/app/debugger.ts#L1-L52)

### 调试Web Workers
项目中大量使用Web Workers处理音频编码、语音识别等耗时任务。调试时可在Worker代码中插入`console.log`输出关键状态，或利用浏览器开发者工具的“Sources”面板设置断点。建议在开发环境中启用`source-map`以获得更准确的调用栈信息。对于复杂的异步流程，可结合`performance.mark`与`performance.measure`进行性能分析。

[无具体文件分析，此节为通用说明]

### 调试Rust插件
Rust编写的Tauri插件位于`crates/`目录下，可通过`cargo build`与`cargo test`进行本地编译与测试。启用调试符号（`debug = true`）后，可使用`gdb`或`lldb`进行断点调试。日志输出建议采用`log`宏配合`env_logger`库，便于在运行时控制日志级别。与前端通信的接口应通过`tauri::command`宏导出，并在TypeScript侧定义对应类型声明。

[无具体文件分析，此节为通用说明]

## 参与贡献的方式
我们欢迎任何形式的贡献，包括但不限于：
- **文档改进**：完善README、编写教程或翻译多语言文档。
- **Bug修复**：发现并修复现有问题，提交复现步骤与解决方案。
- **新功能开发**：实现新的UI组件、集成第三方服务或优化算法性能。
- **设计支持**：提供Live2D模型、VRM角色或界面视觉设计。
- **测试反馈**：报告兼容性问题、性能瓶颈或用户体验建议。

无论您擅长编程、设计还是写作，都能在本项目中找到适合的位置。请查阅`learning/快速启动.md`获取入门指引，并加入Discord社区与其他贡献者交流。

**Section sources**
- [README.md](file://README.md#L100-L150)
- [learning/快速启动.md](file://learning/快速启动.md)

## 结论
Project AIRI是一个开放、包容的开源项目，致力于推动AI虚拟角色技术的发展。通过遵循本文档中的规范与流程，您可以顺利参与到项目的建设中。我们相信，通过社区的共同努力，能够创造出真正有生命力的数字存在。感谢您的关注与贡献！

[无来源，此节为总结性内容]